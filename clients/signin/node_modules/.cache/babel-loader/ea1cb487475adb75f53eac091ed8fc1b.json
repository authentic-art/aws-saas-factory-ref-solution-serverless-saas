{"ast":null,"code":"import _classCallCheck from\"/Users/l1/WebstormProjects/Amplify-AA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/l1/WebstormProjects/Amplify-AA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/l1/WebstormProjects/Amplify-AA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/l1/WebstormProjects/Amplify-AA/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from'react';import{Link}from'react-router-dom';import{Auth}from'aws-amplify';import{Form,Icon,Spin,Input,Button,notification,Col,Row}from'antd';/** Presentational */import FormWrapper from'../../Components/Styled/FormWrapper';/** App theme */import{colors}from'../../Themes/Colors';/** App constants */import{AUTH_USER_TOKEN_KEY}from'../../Utils/constants';var LoginContainer=/*#__PURE__*/function(_React$Component){_inherits(LoginContainer,_React$Component);var _super=_createSuper(LoginContainer);function LoginContainer(){var _this;_classCallCheck(this,LoginContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false};_this.handleSubmit=function(event){event.preventDefault();_this.props.form.validateFields(function(err,values){if(!err){var username=values.username,password=values.password;_this.setState({loading:true});Auth.signIn(username,password).then(function(user){var _this$props=_this.props,history=_this$props.history,location=_this$props.location;// @ts-ignore\nvar _ref=location.state||{from:{pathname:'/dashboard'}},from=_ref.from;localStorage.setItem(AUTH_USER_TOKEN_KEY,user.signInUserSession.accessToken.jwtToken);notification.success({message:'Succesfully logged in!',description:'Logged in successfully, Redirecting you in a few!',placement:'topRight',duration:1.5});history.push(from);}).catch(function(err){notification.error({message:'Error',description:err.message,placement:'topRight'});console.log(err);_this.setState({loading:false});});}});};return _this;}_createClass(LoginContainer,[{key:\"render\",value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;var loading=this.state.loading;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormWrapper,{onSubmit:this.handleSubmit,className:\"login-form\"},/*#__PURE__*/React.createElement(Form.Item,null,getFieldDecorator('username',{rules:[{required:true,message:'Please input your username!'}]})(/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(Icon,{type:\"user\",style:{color:colors.transparentBlack}}),placeholder:\"Username\"}))),/*#__PURE__*/React.createElement(Form.Item,null,getFieldDecorator('password',{rules:[{required:true,message:'Please input your password!'}]})(/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(Icon,{type:\"lock\",style:{color:colors.transparentBlack}}),type:\"password\",placeholder:\"Password\"}))),/*#__PURE__*/React.createElement(Form.Item,{className:\"text-center\"},/*#__PURE__*/React.createElement(Row,{type:\"flex\",gutter:16},/*#__PURE__*/React.createElement(Col,{lg:24},/*#__PURE__*/React.createElement(Link,{style:{float:'right'},className:\"login-form-forgot\",to:\"/forgot-password\"},\"Forgot password\")),/*#__PURE__*/React.createElement(Col,{lg:24},/*#__PURE__*/React.createElement(Button,{style:{width:'100%'},type:\"primary\",disabled:loading,htmlType:\"submit\",className:\"login-form-button\"},loading?/*#__PURE__*/React.createElement(Spin,{indicator:/*#__PURE__*/React.createElement(Icon,{type:\"loading\",style:{fontSize:24},spin:true})}):'Log in')),/*#__PURE__*/React.createElement(Col,{lg:24},\"Or \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"register now!\"))))));}}]);return LoginContainer;}(React.Component);export default Form.create()(LoginContainer);","map":{"version":3,"names":["React","Link","Auth","Form","Icon","Spin","Input","Button","notification","Col","Row","FormWrapper","colors","AUTH_USER_TOKEN_KEY","LoginContainer","state","loading","handleSubmit","event","preventDefault","props","form","validateFields","err","values","username","password","setState","signIn","then","user","history","location","from","pathname","localStorage","setItem","signInUserSession","accessToken","jwtToken","success","message","description","placement","duration","push","catch","error","console","log","getFieldDecorator","rules","required","color","transparentBlack","float","width","fontSize","Component","create"],"sources":["/Users/l1/WebstormProjects/Amplify-AA/src/Containers/LoginContainer/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Link, RouteComponentProps } from 'react-router-dom';\nimport { Auth } from 'aws-amplify';\nimport { Form, Icon, Spin, Input, Button, notification, Col, Row } from 'antd';\n\n/** Presentational */\nimport FormWrapper from '../../Components/Styled/FormWrapper';\n\n/** App theme */\nimport { colors } from '../../Themes/Colors';\n\n/** App constants */\nimport { AUTH_USER_TOKEN_KEY } from '../../Utils/constants';\n\ntype Props = RouteComponentProps & {\n  form: any;\n};\n\ntype State = {\n  loading: boolean;\n};\n\nclass LoginContainer extends React.Component<Props, State> {\n  state = {\n    loading: false\n  };\n\n  handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    this.props.form.validateFields((err: Error, values: { username: string; password: string }) => {\n      if (!err) {\n        let { username, password } = values;\n\n        this.setState({ loading: true });\n\n        Auth.signIn(username, password)\n            .then(user => {\n              const { history, location } = this.props;\n              // @ts-ignore\n              const { from } = location.state || {\n                from: {\n                  pathname: '/dashboard'\n                }\n              };\n\n              localStorage.setItem(AUTH_USER_TOKEN_KEY, user.signInUserSession.accessToken.jwtToken);\n\n              notification.success({\n                message: 'Succesfully logged in!',\n                description: 'Logged in successfully, Redirecting you in a few!',\n                placement: 'topRight',\n                duration: 1.5\n              });\n\n              history.push(from);\n            })\n            .catch(err => {\n              notification.error({\n                message: 'Error',\n                description: err.message,\n                placement: 'topRight'\n              });\n\n              console.log(err);\n\n              this.setState({ loading: false });\n            });\n      }\n    });\n  };\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const { loading } = this.state;\n\n    return (\n        <React.Fragment>\n          <FormWrapper onSubmit={this.handleSubmit} className=\"login-form\">\n            <Form.Item>\n              {getFieldDecorator('username', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Please input your username!'\n                  }\n                ]\n              })(\n                  <Input prefix={<Icon type=\"user\" style={{ color: colors.transparentBlack }} />} placeholder=\"Username\" />\n              )}\n            </Form.Item>\n            <Form.Item>\n              {getFieldDecorator('password', {\n                rules: [\n                  {\n                    required: true,\n                    message: 'Please input your password!'\n                  }\n                ]\n              })(\n                  <Input\n                      prefix={<Icon type=\"lock\" style={{ color: colors.transparentBlack }} />}\n                      type=\"password\"\n                      placeholder=\"Password\"\n                  />\n              )}\n            </Form.Item>\n            <Form.Item className=\"text-center\">\n              <Row type=\"flex\" gutter={16}>\n                <Col lg={24}>\n                  <Link style={{ float: 'right' }} className=\"login-form-forgot\" to=\"/forgot-password\">\n                    Forgot password\n                  </Link>\n                </Col>\n                <Col lg={24}>\n                  <Button\n                      style={{ width: '100%' }}\n                      type=\"primary\"\n                      disabled={loading}\n                      htmlType=\"submit\"\n                      className=\"login-form-button\"\n                  >\n                    {loading ? <Spin indicator={<Icon type=\"loading\" style={{ fontSize: 24 }} spin />} /> : 'Log in'}\n                  </Button>\n                </Col>\n                <Col lg={24}>\n                  Or <Link to=\"/signup\">register now!</Link>\n                </Col>\n              </Row>\n            </Form.Item>\n          </FormWrapper>\n        </React.Fragment>\n    );\n  }\n}\n\nexport default Form.create()(LoginContainer);"],"mappings":"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"},"metadata":{},"sourceType":"module"}